<!DOCTYPE html>
<html>
<head>
    <title>N00143888 - Aaron O'Hare</title>
    <meta charset="utf-8">
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io.connect();
        //display the client ID on the webpage
        socket.on('connect', function () {
            document.getElementById("clientId").innerHTML = "This client's ID is " + socket.id;
        });

        function chat() {
            document.getElementById("chatForm").onsubmit = function getMessage() {
                socket.emit('chat message', document.getElementById('chatbox').value);
                event.preventDefault();
            };
            socket.on('chat message', function (msg) {
                var listItem = document.createElement("li");
                var listItemText = document.createTextNode(msg);
                listItem.appendChild(listItemText);
                document.getElementById('messages').appendChild(listItem);
                document.getElementById('chatbox').value = ("");
            });
        };
    </script>
</head>

<body onload="chat()">
    <p id="clientId"></p>
    <div id="chat">
        <ul id="messages"></ul>
        <form id="chatForm">
            <input id="chatbox"/>
            <button>Send</button>
        </form>
    </div>
</body>
</html>